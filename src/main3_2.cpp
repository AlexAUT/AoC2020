#include <array>
#include <cstdint>
#include <iostream>
#include <numeric>
#include <string>

using namespace std::literals;

constexpr std::array data{
    "..#..#......#..#.......#...#.#."sv, "...##.....##..#..#....#.##.##.#"sv,
    "...#...#.##...##.....#.....#.#."sv, "..#....#.....#...##.##.###.#..."sv,
    ".#.....#......#..#.##.#...###.."sv, "#..#..#.#......#...........###."sv,
    "#......####.#....##........##.."sv, ".#.......#.....#......#...#...."sv,
    "...#...#.....#.......##.....##."sv, "#...##.........#.#..##..#..#.##"sv,
    "#.#.##.........#.#..#.#.....###"sv, ".##..##...#....##.....#..#....."sv,
    "........#.......###.#.#.....#.#"sv, "...#.#....#.##..#...##..##..#.."sv,
    "......#....#........######.#..."sv, ".##...#.#...###......#.#.#..#.#"sv,
    "........#.##...##.#...#..#...##"sv, ".#..#.#..##....###..#.#.......#"sv,
    "..#..##..#.#...#.##......#....."sv, "##.....#..##.#.#..#......##...#"sv,
    "......................#..#..#.."sv, "..#.##....####.........###.##.."sv,
    "##..###..#...#....#..#.#...#..."sv, ".##.#......#..#....#........#.."sv,
    ".#.....#..#..#.#.#....#.....##."sv, "..........#..#....#..##...#..##"sv,
    ".#...#.#....#.##..#.....#....#."sv, "#..............#.#.#..#..#....#"sv,
    "...#.#...............##........"sv, "#.#.##...#.##..##.....#........"sv,
    "...#.......###..###..#...#..#.."sv, "####..#.#..##.....##.#.#......#"sv,
    ".#.#.......#..##.......#......."sv, "#....#...#.##.#.......#..#....."sv,
    ".#...##..#..#..##.......##...#."sv, ".#..#......#.........#........."sv,
    "#.##.#.....#....#..##..#.....#."sv, "#.#....#.#....#...#.#..#....#.."sv,
    "#..#.....#.##..#.....#...##...#"sv, "#....#...##.#.........#.#....##"sv,
    ".......##.##......##.......##.."sv, "#.....#..#........#........#..."sv,
    "#....#.#..#.#........##.#...#.."sv, "#.......#.#.#.#....#.......##.#"sv,
    "...#..###..........#...#.#.###."sv, "....#..#....#...#....##.#.....#"sv,
    ".#..##.....#..#....##..##...#.#"sv, "#.........#....#.#..###...##..."sv,
    ".#.#.........#.#.......#.#.#..#"sv, "..........#........##..#......."sv,
    ".....#.......#...#.....#..##.##"sv, "...#.........#.............####"sv,
    "##..#...#..#.#......#...#......"sv, ".#..###...#.#.#.#...#...#......"sv,
    "....#..##.#....#..#.#..##..##.#"sv, "..#.......#......#..#.......#.."sv,
    "....###......#...##...#....#..."sv, "..#..#.....#...#..###....#.#..#"sv,
    ".........##..#.##....#..##..#.."sv, "##...#...#.#.........##......#."sv,
    "###..#.#....#......##..##.#...#"sv, ".##...##..#.#.#.#......#..#...."sv,
    "###......#..#..#.....#..#....#."sv, ".#.#..##....##........##..#.#.."sv,
    "###...####.#....#.......###...."sv, "..#....###..#.#.#..#.......##.."sv,
    ".......#.#...#.....#.#....##.#."sv, "......#......#.#....#..##..###."sv,
    "....####..........#.....#......"sv, ".###.....#...#..#...##.#...###."sv,
    "...##....##....###....#.#..#.#."sv, "##.#..........##.........#.##.."sv,
    "..#..#.#.###..##..#....##.....#"sv, "..#....##.....#...##....###..##"sv,
    "....#.......##..#..#..........#"sv, "............#..#.###..#.#......"sv,
    "...........##......#.#.#...#..#"sv, "...##.##....#...##.##.....#.#.."sv,
    ".####...#....###...#.....#....#"sv, ".##........#..##..#.#.....#...."sv,
    "..................#.....#..##.."sv, "..###.....#.##..#..#....##...#."sv,
    "...#.##.#.####.#.###.#....#..##"sv, ".#....##..##......####.#####..."sv,
    "#...#.#....##.........##....#.."sv, "..#.##.....##.............#.##."sv,
    "###.....#.#..#..#......#.##.#.."sv, "...#..##.....#...##...#......#."sv,
    ".##.#...#......##.#..##....#..."sv, ".....##.....#......#.#........."sv,
    "#.....#.....#........##........"sv, ".#......##...#..#.#....###.#..#"sv,
    "#.####...#....#.........#..#..."sv, "#..##.#.....#.##.##.#....#...#."sv,
    "#########..#....#..#...#......#"sv, "..##..##...###.######...##.##.."sv,
    "##.......#.......#.#....###..#."sv, ".....#...#.######..#.....#....."sv,
    ".#......#..#.............#.##.#"sv, "..###.#.#......##...###........"sv,
    ".......####.#..##....#........#"sv, "..#......#.##....##.##....#...."sv,
    "....#......#.#....#..#.#.....##"sv, "####.....#....#.#......#.#.#.##"sv,
    "#...##....#.#.##.........#....#"sv, "....#..###......#......#...#..."sv,
    ".....##.#..#..#...#..#.#.#....."sv, ".##............#.....#........."sv,
    "##...#..#.....##.#..#.........."sv, "#.....#####.......#..#....#.#.."sv,
    ".........#..#.....###........#."sv, "#....#..#...###........#..#.#.."sv,
    "...##...#..#...#.##..#........."sv, ".........#.#.....#.......#...#."sv,
    ".#.....#..####....#.##.......##"sv, "...............##....##.##..##."sv,
    "............#....#....#...##.#."sv, "..#...#........#.......#..#...."sv,
    "##....####....#.##...#..##..#.#"sv, ".#.#.....#......#.#........#.#."sv,
    "....#......#.#....##..##......."sv, ".#..#.#..#..##.....#..........."sv,
    "..#........#.##..#......##..#.."sv, "...##.#...#...#..#........#...."sv,
    "##..##....#......#...#..#.#.#.#"sv, "......#.....#..#..#....#......."sv,
    ".....##......#..#.#.##...#....."sv, "...#.....#.#..........#..##...#"sv,
    ".####.##....#...........#.....#"sv, ".....###..##...#....##..#...#.."sv,
    "..##...#.#...#..........#..#.#."sv, "...#..#..............#.##.#...."sv,
    "##.#....#...#..#....#.........."sv, ".##..........#..#........#....."sv,
    "#...#.#......#...#.....##..#..."sv, ".##...#.#.#....###.####..#....#"sv,
    ".#......#.#...#.#....#.#...#..."sv, "#....##.###.............#.#...."sv,
    "....#.###..##..##.##...##......"sv, "##....#..###.##.##.....#......#"sv,
    "..#..#..#......#..#..#........."sv, "#.##......#.#....#..#..#......."sv,
    "....#.#...#..###......##......."sv, ".###.......##.......#....###..."sv,
    "..#..#.##..#.#....#..#.#.....#."sv, ".#..##.##..............#....#.."sv,
    "#...#.#...#..#.##..##.#.#......"sv, "#...#..#..##..##.###......#...."sv,
    ".#..#.....#...#....#.....#...#."sv, ".....#....#..#.....###...#.####"sv,
    ".#.....#......#...##...#..#...."sv, ".#......#............#.#......."sv,
    "....##....#.#..#..#...#..#.#..."sv, "#...#.....###...##...#.##.....#"sv,
    ".......#.....#....#.......#...#"sv, "#.......###.......#.#.........."sv,
    "...#.#.###.#........#.###...#.."sv, "....#............#....#..#....."sv,
    "#......#.##.#...##.......#..#.#"sv, ".....#....#....#.#.#...###..#.."sv,
    ".....#.#...#...#.#..#....#.#..#"sv, ".#.......#.#..#...###.......##."sv,
    ".......#..#.##.........#......."sv, ".##.#........#.##...##....#...."sv,
    ".#....#..#...#......####...#..#"sv, "...#.....#..##.#..#.#....#....#"sv,
    "...##....#........#.#........#."sv, ".....#....##..#.##..........#.."sv,
    "#.....#.#.#......##....##.#..#."sv, ".#.#.##..#.#....##.#....##....."sv,
    ".....#.....#..#.#....#..#....##"sv, "...#........#....#......###.#.."sv,
    ".....##...#.....##.##.#.#.##..."sv, "...#.....#####....##.#.#.###.#."sv,
    ".#..#.#..##...###.........#.#.#"sv, "#...#...#.#..#...#...........#."sv,
    ".##..............#...#..#....#."sv, "....###.........#.#.#....#....."sv,
    "..#...##.#.#....##.#..#...#..#."sv, "..#.....#.#......#....#......#."sv,
    ".......##....#.#.##....#...#..#"sv, "##.#.#...#..#......#..#..#....#"sv,
    "...#.#......#............###.##"sv, "..###..#..##..#...##........#.."sv,
    ".#...#...##...#....#....##.#..#"sv, "..##...####....#....#..#....#.#"sv,
    "...#......##....#.........##.#."sv, "##.#.......#..#..#............."sv,
    "..#.#.#.#......#...#.#..##....."sv, ".#..##.....###...##.#..#......#"sv,
    "##...#..........#.####....##..."sv, "#..........#...#..##....#......"sv,
    "....##...#....#..####...#.##.##"sv, ".#.######...##...#..##........."sv,
    "....##.........#.......##.##..."sv, ".#.....#.#..........##......#.."sv,
    "...#..#.#.###..#........#.....#"sv, "..##..#............##.......#.."sv,
    "......##....##..#.##..#.......#"sv, ".......##....#.......#..#...#.#"sv,
    "#.#......#.###.....#.##........"sv, ".#..##..........#..#.....#.##.."sv,
    "..#.#...#....#.........#..##..#"sv, ".#......#.......#...#..#..###.."sv,
    "......#.##.....#.#......#....#."sv, "....#....#...#.......#...##.##."sv,
    "#....#...##...#..##........###."sv, "##......#.#..#.......#.......#."sv,
    "...##.##..#......#.###..#.#.##."sv, ".............#..#.............#"sv,
    "..#.......##..#..#....##...#..."sv, "...............##..##........#."sv,
    "##...#.##.......#....#.......##"sv, "....##.##.#.#.....##.....##.##."sv,
    "#.#......#.......#..#.#..#....."sv, "....##....#.##........##.##.#.."sv,
    "......##....#..##..#..##....##."sv, ".............#.....#.......#..."sv,
    ".......###.......#..........#.."sv, "......##.#..#.....#.#...#.#...#"sv,
    ".#...#..#..###.###...#....##..."sv, "#......#..#.#...#...#.....#..##"sv,
    ".###.....#..#.#......##..#.##.."sv, ".##.#.....#..#.#..#....##......"sv,
    "#......#..............#.....#.#"sv, "...#..#....#.....#.....##.#...#"sv,
    "......#..##..##.....#...#......"sv, ".....####..#..#.##.......#..#.#"sv,
    "###.#.#........#.......#.....##"sv, "..#.#.#.#...#...#........#....#"sv,
    "....##.#.#..#...##.....#......#"sv, "#..#.##....#..#.##..####......."sv,
    "...####.#...#......#......##..#"sv, "#....#.#..###......#..#..##..#."sv,
    "...........#....#...#......#..."sv, "......###.#.....#.#....#.#...#."sv,
    ".......#.##..............#..##."sv, "..##...........#..#.#...#.....#"sv,
    "#..#............##.........#.#."sv, ".......###.#...#.#...#.#.#...#."sv,
    "..#...##.......#..#......#.#.##"sv, "#.#...#.....#...##.#.#.......##"sv,
    ".#.#.##...#..##.#......#......."sv, "#.......#.......#.#....#.....#."sv,
    ".....#..#..#.......#..#........"sv, "##...##...##......#..##.###...."sv,
    "..#...#.###.#.###..#.....###..."sv, ".....####.......#.#.....##....#"sv,
    "....#....#.#....#...#..#.#..#.."sv, "..##.....#....#.#.#.###...#...."sv,
    "......#.#....#.#..#....#.#..#.."sv, "#...#...#....#.......#......#.#"sv,
    "#..#.#......#..#...........#.##"sv, "...............#....#.....#...#"sv,
    ".#.#.#...#.##...#.#.#..#....#.."sv, "...#.#.####..##.#...##........."sv,
    "##.........##.##.....##....#..."sv, "................#...#.##.#.#..#"sv,
    ".#..#....#...#..#..#..###.#..#."sv, "...#..#.##.#.####..........#..#"sv,
    "........#....##......#..#.#...."sv, "........##.........#..#..#..#.#"sv,
    "#......#.#...#...#...##.....#.."sv, "#...#.....#..#..##.#...#.#.#..."sv,
    "....#..##...##.....#...#.#....."sv, "..#..##....#....#...#....#....."sv,
    ".#..#...##.......###...#...#..."sv, ".#......#......#..##..#..##...."sv,
    "....##....#..#.#....#.#..##...."sv, "###......#...........#.....###."sv,
    ".....#...#..##.#..#..#.....#..#"sv, "#.#....#...........#.##..#..###"sv,
    "#....#...###.#...#..##..#.....#"sv, ".#....#......##.#..#....#.#...."sv,
    "....#.#....#..#.#....#..#..#..."sv, "..#......#..#.#.#....#........."sv,
    ".#...#.#.....#........#.#...###"sv, "....#..##.......#.###....##...."sv,
    "#.#.......#......#.###........#"sv, "#.........#.....####.##..#..#.."sv,
    ".#.#..##...#.#.....##.#.#..#..."sv, ".#..#..#..#.##..#...###.#...#.."sv,
    ".....##..##..##..#.#.#.....###."sv, ".#..#...#..#......##.#........."sv,
    "....#..##....#.##.........#...#"sv, "........#...#...###.........##."sv,
    "#.........#..##....#.#...#....."sv, ".......#.......#..#.......#...."sv,
    "#......##......#.#.##.........."sv, ".#..##..####...#.....####.....#"sv,
    "........#.#....#..##..###.#...#"sv, ".#...#...#.........###..#...#.#"sv,
    "#.........#....##...#.........."sv, ".#.#....#..........#..........."sv,
    ".#.#..........#.##.....#.##...."sv, "..#....#...##..###..........##."sv,
    ".#.#..#.##..#..#.##.##..##....."sv, "........#...#....#...#.#..##..."sv,
    "......#......##..#..#.....#..#."sv, ".##.#....#...#....#...#..##..##"sv,
    "##............#..........###..."sv, "....#.......#.#..#.#####.....#."sv,
    "#......#.....#...#........#...."sv, "..##.....###..#.#.#.#....#....#"sv,
    "#...#...#.#..#..#....#..#......"sv, "......#....#...#..#....#####..."sv,
    "....#.......##....#....##......"sv, ".....##...#.##.#.....##....#..."sv,
    ".#....###.#..##...##.##.......#"sv, "....#.#.#.##.............#..##."sv,
    "...........##......#...#.#.##.."sv, "....##......#....#....##..##.#."sv,
    ".#.#...#.....##.....#.........#"sv, "#.#..........#.......#.##...#.."sv,
    "....#.##..#.#....#.....#...#..."sv, "##.............##.......#.##.#."sv,
    "....#...#.....##...#..........#"sv, "##..#...#...#.#.##...#.......##"sv,
    "..#........#.....###...##..##.#"sv, ".....#...##.#.#.##.....#...#..."sv,
    "####.###...##..##...#..#..#..##"sv, "......#..#..#.........#...#.#.."sv,
    "....###.....##.##....#.##.....#"sv,
};

int main() {
  constexpr auto number_of_cols = data[0].size();

  std::array moves{std::array{1, 1}, std::array{3, 1}, std::array{5, 1},
                   std::array{7, 1}, std::array{1, 2}};
  std::array<unsigned, moves.size()> trees{0};

  int i = 0;
  for (auto move : moves) {
    auto row_index = move[1];
    auto col_index = 0U;

    while (row_index < data.size()) {
      col_index = (col_index + move[0]) % number_of_cols;
      trees[i] += data[row_index][col_index] == '#' ? 1 : 0;

      row_index += move[1];
    }
    i++;
  }
  auto product =
      std::accumulate(trees.begin(), trees.end(), static_cast<uint64_t>(1),
                      [](unsigned p, uint64_t c) { return p * c; });
  std::cout << "Found trees product: " << product << std::endl;
}
